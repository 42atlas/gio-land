{"version":3,"sources":["main.js"],"names":["kaboom","global","background","width","height","scale","canvas","document","getElementById","font","fullscreen","scaleMode","loadAseprite","loadSprite","loadSound","LEVELS","levelConf","pos","vec2","sprite","area","solid","origin","H","b","f","bump","c","cleanup","lifespan","fade","M","patrol","body","F","_","E","anim","tarma","A","ami","D","dito","Y","shark","speed","p","frame","mario","scene","add","text","size","color","onKeyRelease","go","levelNumber","layers","level","addLevel","music","play","volume","detune","rand","layer","player","spawn","SPEED","onKeyDown","isFrozen","flipX","move","toScreen","x","onKeyPress","isAlive","grounded","jump","canSquash","killed","die","pause","toWorld","wait","onFall","onUpdate","currCam","camPos","y","onCollide","baddy","squash","isFlamy","bigger","isBig","smaller","on","obj","is","coin","gridPos","sub","destroy","box","mushy","flower","flamy","castle","side","freeze","nextLevel","length","action","s","distance","dir","id","require","startingPos","update","Math","abs","unuse","stop","use","offset","stopAtOrigin","bumpOffset","bumped","origPos","direction","smallAnimation","bigAnimation","flameanimation","smallStopFrame","bigStopFrame","flameStopFrame","smallJumpFrame","bigJumpFrame","flameJumpFrame","standing","jumping","keyIsDown","running","animation","curAnim"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["kaboom({\r\n  global: true,\r\n  background: [134, 135, 247],\r\n  width: 320,\r\n  height: 240,\r\n  scale: 4,\r\n  canvas: document.getElementById(\"game\"),\r\n  font: \"sink\",\r\n  fullscreen: true,\r\n  scaleMode: \"stretch\",\r\n});\r\n\r\n/* loadRoot(\"sprites/\"); */\r\nloadAseprite(\"mario\", \"Mario.png\", \"Mario.json\");\r\nloadAseprite(\"enemies\", \"enemies.png\", \"enemies.json\");\r\nloadSprite(\"ground\", \"ground.png\");\r\nloadSprite(\"questionBox\", \"questionBox.png\");\r\nloadSprite(\"emptyBox\", \"emptyBox.png\");\r\nloadSprite(\"brick\", \"brick.png\");\r\nloadSprite(\"coin\", \"coin.png\");\r\nloadSprite(\"bigMushy\", \"bigMushy.png\");\r\nloadSprite(\"Flower\", \"Flower.png\");\r\nloadSprite(\"pipeTop\", \"pipeTop.png\");\r\nloadSprite(\"pipeBottom\", \"pipeBottom.png\");\r\nloadSprite(\"shrubbery\", \"shrubbery.png\");\r\nloadSprite(\"hill\", \"hill.png\");\r\nloadSprite(\"cloud\", \"cloud.png\");\r\nloadSprite(\"castle\", \"castle.png\");\r\n\r\n/* loadRoot(\"sounds/\"); */\r\nloadSound(\"mushroom\", \"mushroom.wav\");\r\nloadSound(\"coin\", \"coin.wav\");\r\nloadSound(\"flower\", \"flower.wav\");\r\nloadSound(\"jump\", \"jump.wav\");\r\nloadSound(\"hit\", \"hit.wav\");\r\nloadSound(\"gameover\", \"gameover.wav\");\r\nloadSound(\"stageclear\", \"stageclear.wav\");\r\nloadSound(\"goodbox\", \"goodbox.wav\");\r\nloadSound(\"getsmall\", \"getsmall.wav\");\r\nloadSound(\"flower-chomp\", \"flower-chomp.mp3\");\r\n\r\n//soundtrack\r\nloadSound(\"level0\", \"level0.mp3\");\r\nloadSound(\"level1\", \"level1.mp3\");\r\nloadSound(\"level2\", \"level2.mp3\");\r\nloadSound(\"level3\", \"level3.mp3\");\r\n\r\nconst LEVELS = [\r\n  [\r\n    \"                                                                                                  \",\r\n    \"                                                                                                  \",\r\n    \"                                                                                                  \",\r\n    \"                                                                                                  \",\r\n    \"                                                                                                  \",\r\n    \"                                                                                                  \",\r\n    \"                                                                                                  \",\r\n    \"     f-?-b-                                                                                       \",\r\n    \"                                                      ?        ?                                  \",\r\n    \"                                                           ?                                      \",\r\n    \"                                        _                                                         \",\r\n    \"             Y                     _    |                                                         \",\r\n    \"             _         _           |    |                _                                        \",\r\n    \"             |         |E          |    |      E   E     |                            H           \",\r\n    \"================     =============================================================================\",\r\n    \"================     =============================================================================\",\r\n  ],\r\n  [\r\n    \"                                                                                             \",\r\n    \"                                                                                             \",\r\n    \"                                                                                             \",\r\n    \"                                       ?                                                     \",\r\n    \"                                                                                             \",\r\n    \"                                   -?-                                                       \",\r\n    \"                                                                                             \",\r\n    \"      -?-b-                  -?-                                                             \",\r\n    \"                                                                                             \",\r\n    \"                                                                                             \",\r\n    \"                                                                                             \",\r\n    \"                                                                                             \",\r\n    \"       _                                            _                                        \",\r\n    \"       |                                            |          E    E            H           \",\r\n    \"================     ========================================================================\",\r\n    \"================     ========================================================================\",\r\n  ],\r\n];\r\n\r\nconst levelConf = {\r\n  // grid size\r\n  width: 16,\r\n  height: 16,\r\n  pos: vec2(0, 0),\r\n  // define each object as a list of components\r\n  \"=\": () => [sprite(\"ground\"), area(), solid(), origin(\"bot\"), \"ground\"],\r\n  \"-\": () => [sprite(\"brick\"), area(), solid(), origin(\"bot\"), \"brick\"],\r\n  H: () => [\r\n    sprite(\"castle\"),\r\n    area({ width: 1, height: 240 }),\r\n\r\n    origin(\"bot\"),\r\n    \"castle\",\r\n  ],\r\n  \"?\": () => [\r\n    sprite(\"questionBox\"),\r\n    area(),\r\n    solid(),\r\n    origin(\"bot\"),\r\n    \"questionBox\",\r\n    \"coinBox\",\r\n  ],\r\n  b: () => [\r\n    sprite(\"questionBox\"),\r\n    area(),\r\n    solid(),\r\n    origin(\"bot\"),\r\n    \"questionBox\",\r\n    \"mushyBox\",\r\n  ],\r\n  f: () => [\r\n    sprite(\"questionBox\"),\r\n    area(),\r\n    solid(),\r\n    origin(\"bot\"),\r\n    \"questionBox\",\r\n    \"flowerBox\",\r\n  ],\r\n  \"!\": () => [\r\n    sprite(\"emptyBox\"),\r\n    area(),\r\n    solid(),\r\n    bump(),\r\n    origin(\"bot\"),\r\n    \"emptyBox\",\r\n  ],\r\n  c: () => [\r\n    sprite(\"coin\"),\r\n    area(),\r\n    solid(),\r\n    bump(64, 8),\r\n    cleanup(),\r\n    lifespan(1, { fade: 0.5 }),\r\n    origin(\"bot\"),\r\n    \"coin\",\r\n  ],\r\n  M: () => [\r\n    sprite(\"bigMushy\"),\r\n    area(),\r\n    solid(),\r\n    patrol(10000),\r\n    body(),\r\n    cleanup(),\r\n    origin(\"bot\"),\r\n    \"bigMushy\",\r\n  ],\r\n  F: () => [\r\n    sprite(\"Flower\"),\r\n    area(),\r\n    solid(),\r\n    body(),\r\n    cleanup(),\r\n    origin(\"bot\"),\r\n    \"Flower\",\r\n  ],\r\n  \"|\": () => [sprite(\"pipeBottom\"), area(), solid(), origin(\"bot\"), \"pipe\"],\r\n  _: () => [sprite(\"pipeTop\"), area(), solid(), origin(\"bot\"), \"pipe\"],\r\n  E: () => [\r\n    sprite(\"enemies\", { anim: \"Walking\" }),\r\n    area({ width: 20, height: 24 }),\r\n    solid(),\r\n    body(),\r\n    patrol(50),\r\n    tarma(),\r\n    origin(\"bot\"),\r\n    \"badGuy\",\r\n  ],\r\n  A: () => [\r\n    sprite(\"enemies\", { anim: \"Walk\" }),\r\n    area({ width: 26, height: 20 }),\r\n    solid(),\r\n    body(),\r\n    patrol(80),\r\n    ami(),\r\n    origin(\"bot\"),\r\n    \"badGuy\",\r\n  ],\r\n  D: () => [\r\n    sprite(\"enemies\", { anim: \"WalkHB\" }),\r\n    area({ width: 20, height: 28 }),\r\n    solid(),\r\n    body(),\r\n    patrol(20),\r\n    dito(),\r\n    origin(\"bot\"),\r\n    \"badGuy\",\r\n  ],\r\n  Y: () => [\r\n    sprite(\"enemies\", { anim: \"Piranha\" }),\r\n    area({ width: 20, height: 28 }),\r\n    /* solid(), */\r\n    shark(),\r\n    origin(\"top\"),\r\n    \"badGuy\",\r\n    {\r\n      speed: 20,\r\n    },\r\n  ],\r\n  p: () => [\r\n    sprite(\"mario\", { frame: 0 }),\r\n    area({ width: 16, height: 16 }),\r\n    body(),\r\n    mario(),\r\n    bump(150, 20, false),\r\n    origin(\"bot\"),\r\n    \"player\",\r\n  ],\r\n};\r\n\r\nscene(\"start\", () => {\r\n  add([\r\n    text(\"Press enter to play\", { size: 18 }),\r\n    pos(width() / 2, height() / 2),\r\n    origin(\"center\"),\r\n    color(255, 255, 255),\r\n  ]);\r\n\r\n  onKeyRelease(\"enter\", () => {\r\n    go(\"game\");\r\n  });\r\n});\r\n\r\ngo(\"start\");\r\n\r\nscene(\"game\", (levelNumber = 0) => {\r\n  layers([\"bg\", \"game\", \"ui\"], \"game\");\r\n\r\n  /* gravity(2200); */\r\n\r\n  const level = addLevel(LEVELS[levelNumber], levelConf);\r\n\r\n  const music = play(`level${levelNumber}`, {\r\n    volume: 0.1,\r\n    detune: rand(0, 0),\r\n  });\r\n\r\n  music.play();\r\n\r\n  add([sprite(\"cloud\"), pos(20, 50), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(150, 60), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(320, 40), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(520, 50), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(620, 70), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(820, 40), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(1020, 70), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(1190, 50), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(1300, 80), layer(\"bg\")]);\r\n  add([sprite(\"cloud\"), pos(1420, 60), layer(\"bg\")]);\r\n\r\n  add([sprite(\"hill\"), pos(32, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"hill\"), pos(409, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"hill\"), pos(803, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"hill\"), pos(1200, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"hill\"), pos(1500, 208), layer(\"bg\"), origin(\"bot\")]);\r\n\r\n  add([sprite(\"shrubbery\"), pos(200, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"shrubbery\"), pos(680, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"shrubbery\"), pos(480, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"shrubbery\"), pos(1080, 208), layer(\"bg\"), origin(\"bot\")]);\r\n  add([sprite(\"shrubbery\"), pos(1250, 208), layer(\"bg\"), origin(\"bot\")]);\r\n\r\n  add([\r\n    text(\"Level \" + (levelNumber + 1), { size: 18 }),\r\n    pos(vec2(160, 120)),\r\n    color(255, 255, 255),\r\n    origin(\"center\"),\r\n    layer(\"ui\"),\r\n    lifespan(1, { fade: 0.5 }),\r\n  ]);\r\n\r\n  //player\r\n  const player = level.spawn(\"p\", 1, 10);\r\n\r\n  const SPEED = 100;\r\n\r\n  onKeyDown(\"right\", () => {\r\n    if (player.isFrozen) return;\r\n    player.flipX(false);\r\n    player.move(SPEED, 0);\r\n  });\r\n\r\n  onKeyDown(\"left\", () => {\r\n    if (player.isFrozen) return;\r\n    player.flipX(true);\r\n    if (toScreen(player.pos).x > 20) {\r\n      player.move(-SPEED, 0);\r\n    }\r\n  });\r\n\r\n  onKeyPress(\"up\", () => {\r\n    if (player.isAlive && player.grounded()) {\r\n      player.jump(600);\r\n      canSquash = true;\r\n    }\r\n    play(\"jump\", {\r\n      volume: 0.05,\r\n      detune: rand(-200, 0),\r\n    });\r\n  });\r\n\r\n  //Killed\r\n  function killed() {\r\n    // Mario is dead :(\r\n    if (player.isAlive == false) return; // Don't run it if mario is already dead\r\n    player.die();\r\n    music.pause();\r\n    add([\r\n      text(\"Gio is dead :(\", { size: 24 }),\r\n      pos(toWorld(vec2(160, 120))),\r\n      color(255, 255, 255),\r\n      origin(\"center\"),\r\n      layer(\"ui\"),\r\n    ]);\r\n    wait(3, () => {\r\n      go(\"start\");\r\n    });\r\n  }\r\n\r\n  player.onFall(() => {\r\n    canSquash = true;\r\n  });\r\n\r\n  player.onUpdate(() => {\r\n    // center camera to player\r\n    var currCam = camPos();\r\n    if (currCam.x < player.pos.x) {\r\n      camPos(player.pos.x, currCam.y);\r\n    }\r\n\r\n    if (player.isAlive && player.grounded()) {\r\n      canSquash = false;\r\n    }\r\n\r\n    // Check if Mario has fallen off the screen\r\n    if (player.pos.y > height() - 16) {\r\n      killed();\r\n    }\r\n  });\r\n\r\n  let canSquash = false;\r\n\r\n  //collision with badguy\r\n\r\n  player.onCollide(\"badGuy\", (baddy) => {\r\n    if (baddy.isAlive == false) return;\r\n    if (player.isAlive == false) return;\r\n    if (canSquash) {\r\n      // Mario has jumped on the bad guy:\r\n      baddy.squash();\r\n      play(\"hit\", {\r\n        volume: 0.2,\r\n        detune: rand(-100, 0),\r\n      });\r\n    } else {\r\n      // Mario has been hurt\r\n      if (player.isFlamy) {\r\n        wait(0.15, () => {\r\n          player.bigger();\r\n          play(\"getsmall\", {\r\n            volume: 0.2,\r\n            detune: rand(-100, 0),\r\n          });\r\n        });\r\n      } else if (player.isBig) {\r\n        wait(0.15, () => {\r\n          player.smaller();\r\n          play(\"getsmall\", {\r\n            volume: 0.2,\r\n            detune: rand(-100, 0),\r\n          });\r\n        });\r\n      } else {\r\n        // Mario is dead :(\r\n        killed();\r\n      }\r\n    }\r\n  });\r\n\r\n  player.on(\"headbutt\", (obj) => {\r\n    if (obj.is(\"questionBox\")) {\r\n      if (obj.is(\"coinBox\")) {\r\n        let coin = level.spawn(\"c\", obj.gridPos.sub(0, 1));\r\n        coin.bump();\r\n        play(\"coin\", {\r\n          volume: 0.2,\r\n          detune: rand(-400, 100),\r\n        });\r\n      } else if (obj.is(\"mushyBox\")) {\r\n        level.spawn(\"M\", obj.gridPos.sub(0, 1));\r\n        play(\"goodbox\", {\r\n          volume: 0.7,\r\n          detune: rand(-400, 100),\r\n        });\r\n      } else if (obj.is(\"flowerBox\")) {\r\n        level.spawn(\"F\", obj.gridPos.sub(0, 1));\r\n        play(\"goodbox\", {\r\n          volume: 0.7,\r\n          detune: rand(-400, 100),\r\n        });\r\n      }\r\n      var pos = obj.gridPos;\r\n      destroy(obj);\r\n      var box = level.spawn(\"!\", pos);\r\n      box.bump();\r\n    }\r\n  });\r\n\r\n  player.onCollide(\"bigMushy\", (mushy) => {\r\n    destroy(mushy);\r\n    player.bigger();\r\n    play(\"mushroom\", {\r\n      volume: 0.2,\r\n      detune: rand(-400, 100),\r\n    });\r\n  });\r\n\r\n  player.onCollide(\"Flower\", (flower) => {\r\n    destroy(flower);\r\n    player.flamy();\r\n    play(\"flower\", {\r\n      volume: 0.2,\r\n      detune: rand(-400, 100),\r\n    });\r\n  });\r\n\r\n  //castle\r\n\r\n  player.onCollide(\"castle\", (castle, side) => {\r\n    player.freeze();\r\n    music.pause();\r\n    play(\"stageclear\", {\r\n      volume: 0.2,\r\n      detune: rand(-200, 100),\r\n    });\r\n    add([\r\n      text(\"Good Giob!\", { size: 24 }),\r\n      pos(toWorld(vec2(160, 120))),\r\n      color(255, 255, 255),\r\n      origin(\"center\"),\r\n      layer(\"ui\"),\r\n    ]);\r\n    wait(7, () => {\r\n      let nextLevel = levelNumber + 1;\r\n\r\n      if (nextLevel >= LEVELS.length) {\r\n        go(\"start\");\r\n      } else {\r\n        go(\"game\", nextLevel);\r\n      }\r\n    });\r\n  });\r\n\r\n  //shark move\r\n\r\n  action(\"shark\", (s) => {\r\n    s.move(0, -s.speed);\r\n\r\n    if (s.pos.y > 200 || s.pos.y < 150) {\r\n      s.speed = s.speed * -1;\r\n    }\r\n  });\r\n});\r\n\r\n//patrol function\r\n\r\nfunction patrol(distance = 100, speed = 50, dir = 1) {\r\n  return {\r\n    id: \"patrol\",\r\n    require: [\"pos\", \"area\"],\r\n    startingPos: vec2(0, 0),\r\n    add() {\r\n      this.startingPos = this.pos;\r\n      this.onCollide(\"badGuy\", () => {\r\n        dir = -dir;\r\n      });\r\n      this.onCollide(\"pipe\", () => {\r\n        dir = -dir;\r\n      });\r\n    },\r\n    update() {\r\n      if (Math.abs(this.pos.x - this.startingPos.x) >= distance) {\r\n        dir = -dir;\r\n      }\r\n      this.move(speed * dir, 0);\r\n    },\r\n  };\r\n}\r\n\r\n//enemies set\r\n\r\nfunction tarma() {\r\n  return {\r\n    id: \"tarma\",\r\n    require: [\"pos\", \"area\", \"sprite\", \"patrol\"],\r\n    isAlive: true,\r\n    update() {},\r\n    squash() {\r\n      this.isAlive = false;\r\n      this.unuse(\"patrol\");\r\n      this.stop();\r\n      this.frame = 2;\r\n      this.area.width = 18;\r\n      this.area.height = 8;\r\n      this.use(lifespan(0.5, { fade: 0.1 }));\r\n    },\r\n  };\r\n}\r\n\r\nfunction ami() {\r\n  return {\r\n    id: \"ami\",\r\n    require: [\"pos\", \"area\", \"sprite\", \"patrol\"],\r\n    isAlive: true,\r\n    update() {},\r\n    squash() {\r\n      this.isAlive = false;\r\n      this.unuse(\"patrol\");\r\n      this.stop();\r\n      this.frame = 5;\r\n      this.area.width = 26;\r\n      this.area.height = 18;\r\n      this.use(lifespan(0.5, { fade: 0.1 }));\r\n    },\r\n  };\r\n}\r\n\r\nfunction dito() {\r\n  return {\r\n    id: \"dito\",\r\n    require: [\"pos\", \"area\", \"sprite\", \"patrol\"],\r\n    isAlive: true,\r\n    update() {},\r\n    squash() {\r\n      this.isAlive = false;\r\n      this.unuse(\"patrol\");\r\n      this.stop();\r\n      this.frame = 12;\r\n      this.area.width = 20;\r\n      this.area.height = 22;\r\n      this.use(lifespan(0.5, { fade: 0.1 }));\r\n    },\r\n  };\r\n}\r\n\r\nfunction shark() {\r\n  return {\r\n    id: \"shark\",\r\n    require: [\"pos\", \"area\", \"sprite\"],\r\n    isAlive: true,\r\n    update() {},\r\n  };\r\n}\r\n\r\n//general bump\r\n\r\nfunction bump(offset = 8, speed = 2, stopAtOrigin = true) {\r\n  return {\r\n    id: \"bump\",\r\n    require: [\"pos\"],\r\n    bumpOffset: offset,\r\n    speed: speed,\r\n    bumped: false,\r\n    origPos: 0,\r\n    direction: -1,\r\n    update() {\r\n      if (this.bumped) {\r\n        this.pos.y = this.pos.y + this.direction * this.speed;\r\n        if (this.pos.y < this.origPos - this.bumpOffset) {\r\n          this.direction = 1;\r\n        }\r\n        if (stopAtOrigin && this.pos.y >= this.origPos) {\r\n          this.bumped = false;\r\n          this.pos.y = this.origPos;\r\n          this.direction = -1;\r\n        }\r\n      }\r\n    },\r\n    bump() {\r\n      this.bumped = true;\r\n      this.origPos = this.pos.y;\r\n    },\r\n  };\r\n}\r\n\r\n//GIO\r\nfunction mario() {\r\n  return {\r\n    id: \"mario\",\r\n    require: [\"body\", \"area\", \"sprite\", \"bump\"],\r\n    smallAnimation: \"Running\",\r\n    bigAnimation: \"RunningBig\",\r\n    flameanimation: \"Loop\",\r\n    smallStopFrame: 0,\r\n    bigStopFrame: 8,\r\n    flameStopFrame: 17,\r\n    smallJumpFrame: 5,\r\n    bigJumpFrame: 13,\r\n    flameJumpFrame: 22,\r\n    /* smallDieFrame: 6, */\r\n    isBig: false,\r\n    isFrozen: false,\r\n    isFlamy: false,\r\n    isAlive: true,\r\n    update() {\r\n      if (this.isFrozen) {\r\n        this.standing();\r\n        return;\r\n      }\r\n\r\n      if (!this.grounded()) {\r\n        this.jumping();\r\n      } else {\r\n        if (keyIsDown(\"left\") || keyIsDown(\"right\")) {\r\n          this.running();\r\n        } else {\r\n          this.standing();\r\n        }\r\n      }\r\n    },\r\n    bigger() {\r\n      this.isBig = true;\r\n      this.isFlamy = false;\r\n      this.area.width = 20;\r\n      this.area.height = 22;\r\n    },\r\n    flamy() {\r\n      this.isBig = false;\r\n      this.isFlamy = true;\r\n      this.area.width = 20;\r\n      this.area.height = 22;\r\n    },\r\n    smaller() {\r\n      this.isBig = false;\r\n      this.isFlamy = false;\r\n      this.area.width = 16;\r\n      this.area.height = 16;\r\n    },\r\n    standing() {\r\n      this.stop();\r\n      if (this.isBig) {\r\n        this.frame = this.bigStopFrame;\r\n      } else if (this.isFlamy) {\r\n        this.frame = this.flameStopFrame;\r\n      } else {\r\n        this.frame = this.smallStopFrame;\r\n      }\r\n      /* this.frame = this.isBig ? this.bigStopFrame : this.smallStopFrame; */\r\n    },\r\n    jumping() {\r\n      this.stop();\r\n      if (this.isBig) {\r\n        this.frame = this.bigJumpFrame;\r\n      } else if (this.isFlamy) {\r\n        this.frame = this.flameJumpFrame;\r\n      } else {\r\n        this.frame = this.smallJumpFrame;\r\n      }\r\n      /* this.frame = this.isBig ? this.bigJumpFrame : this.smallJumpFrame; */\r\n    },\r\n    running() {\r\n      let animation;\r\n      if (this.isBig) {\r\n        animation = this.bigAnimation;\r\n      } else if (this.isFlamy) {\r\n        animation = this.flameanimation;\r\n      } else {\r\n        animation = this.smallAnimation;\r\n      }\r\n      /* const animation = this.isBig ? this.bigAnimation : this.smallAnimation; */\r\n      if (this.curAnim() !== animation) {\r\n        this.play(animation);\r\n      }\r\n    },\r\n    freeze() {\r\n      this.isFrozen = true;\r\n    },\r\n    die() {\r\n      /* this.stop();\r\n      this.frame = this.smallDieFrame; */\r\n      this.unuse(\"body\");\r\n      this.bump();\r\n      this.isAlive = false;\r\n      this.freeze();\r\n      this.use(lifespan(6, { fade: 1 }));\r\n      play(\"gameover\", {\r\n        volume: 0.2,\r\n        detune: rand(-100, 0),\r\n      });\r\n    },\r\n  };\r\n}\r\n"]}